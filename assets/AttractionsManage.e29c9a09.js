import{_ as v,o as a,c as n,a as t,k as i,v as r,f as P,l as k,m as x,b as A,j as u,r as _,d as f,F as g,e as C,t as m,p as N,i as V}from"./index.bae35636.js";import{M as I,I as S}from"./informModal.cd09cc62.js";const U={props:{place:{type:Object,default(){return{}}},isNew:{type:Boolean,default:!1}},data(){return{status:{},modal:"",tempPlace:{}}},emits:["update-place"],watch:{place:{handler(e){this.tempPlace={...e}},deep:!0}},methods:{openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new I(this.$refs.modal)}},$={class:"modal fade",id:"placeModal",tabindex:"-1",role:"dialog","aria-labelledby":"editModal","aria-hidden":"true",ref:"modal"},D={class:"modal-dialog modal-lg",role:"document"},B={class:"modal-content border-0"},E={class:"modal-header"},F={class:"modal-title",id:"editModal"},G={key:0},j={key:1},L=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),O={class:"modal-body"},R={class:"row"},T={class:"col"},q={class:"mb-3"},z=t("label",{for:"title",class:"form-label"},"\u6A19\u984C",-1),H={class:"mb-3"},J={for:"image",class:"form-label"},K={key:0},Q={key:1},W={class:"row gx-2"},X={class:"mb-3 col-md-6"},Y=t("label",{for:"category",class:"form-label"},"\u5206\u985E",-1),Z={class:"mb-3 col-md-6"},tt=t("label",{for:"price",class:"form-label"},"\u8A55\u50F9",-1),et={class:"row gx-2"},ot={class:"mb-3 col"},st=t("label",{for:"address",class:"form-label"},"\u5730\u5740",-1),lt=t("hr",null,null,-1),at={class:"mb-3"},nt=t("label",{for:"description",class:"form-label"},"\u63CF\u8FF0",-1),dt={class:"mb-3"},it={class:"form-check"},ct=t("label",{class:"form-check-label",for:"is_enabled"}," \u662F\u5426\u555F\u7528 ",-1),rt={class:"modal-footer"},mt=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1);function ht(e,o,p,y,s,c){return a(),n("div",$,[t("div",D,[t("div",B,[t("div",E,[t("h5",F,[p.isNew?(a(),n("span",G,"\u65B0\u589E\u7522\u54C1")):(a(),n("span",j,"\u7DE8\u8F2F\u7522\u54C1"))]),L]),t("div",O,[t("div",R,[t("div",T,[t("div",q,[z,i(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":o[0]||(o[0]=l=>s.tempPlace.name=l),placeholder:"\u8ACB\u8F38\u5165\u540D\u7A31"},null,512),[[r,s.tempPlace.name]])]),t("div",H,[t("label",J,[p.isNew?(a(),n("span",K,"\u65B0\u589E")):(a(),n("span",Q,"\u7DE8\u8F2F")),P("\u5716\u7247\u7DB2\u5740")]),i(t("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":o[1]||(o[1]=l=>s.tempPlace.image=l),placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u9023\u7D50"},null,512),[[r,s.tempPlace.image]])]),t("div",W,[t("div",X,[Y,i(t("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":o[2]||(o[2]=l=>s.tempPlace.category=l),placeholder:"\u8ACB\u8F38\u5165\u5206\u985E"},null,512),[[r,s.tempPlace.category]])]),t("div",Z,[tt,i(t("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":o[3]||(o[3]=l=>s.tempPlace.GoogleRate=l),placeholder:"\u8ACB\u8F38\u5165 Google \u4E0A\u7684\u8A55\u50F9"},null,512),[[r,s.tempPlace.GoogleRate]])])]),t("div",et,[t("div",ot,[st,i(t("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":o[4]||(o[4]=l=>s.tempPlace.address=l),placeholder:"\u8ACB\u8F38\u5165\u5730\u5740"},null,512),[[r,s.tempPlace.address]])])]),lt,t("div",at,[nt,i(t("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":o[5]||(o[5]=l=>s.tempPlace.description=l),placeholder:"\u8ACB\u8F38\u5165\u7522\u54C1\u63CF\u8FF0"},null,512),[[r,s.tempPlace.description]])]),t("div",dt,[t("div",it,[i(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[6]||(o[6]=l=>s.tempPlace.is_enabled=l),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[k,s.tempPlace.is_enabled]]),ct])])])])]),t("div",rt,[mt,t("button",{type:"button",class:"btn btn-primary",onClick:o[7]||(o[7]=l=>e.$emit("update-place",s.tempPlace))}," \u78BA\u8A8D ")])])])],512)}const pt=v(U,[["render",ht]]);const ut={components:{EditModal:pt,InformModal:S},data(){return{chosenPlace:{},isNew:!1,loading:!1,deleteStatus:!1}},computed:{...x("user",["attractions"])},methods:{...A("user",["getAttractions","getCollectionIdSetting","attractions"]),async editAttraction(e,o){this.loading=!0,await u.editAttraction(e,o),this.loading=!1},async addAttraction(e){this.loading=!0,await u.addAttraction(e),this.loading=!1},async deleteAttraction(e){this.loading=!0,await u.deleteAttraction(e),this.loading=!1},openModal(e,o){this.isNew=e,e?this.chosenPlace={}:this.chosenPlace={...o},this.$refs.modal.openModal()},openDelModal(e){this.deleteStatus=!0,this.chosenPlace={...e};const{name:o}=this.chosenPlace;this.$refs.infoModal.openModal(`\u78BA\u8A8D\u8981\u522A\u9664${o}\u9019\u7B46\u8CC7\u6599`,"\u522A\u9664\u78BA\u8A8D\u63D0\u793A",["confirm"])},confirmAction(){this.deleteStatus?this.confirmDelete():this.hideInfoModal()},confirmDelete(){const{id:e}=this.chosenPlace;this.deleteAttraction(e),this.hideInfoModal()},hideInfoModal(){this.deleteStatus=!1,this.$refs.modal.hideModal(),this.$refs.infoModal.hideModal()},hideModal(){this.$refs.modal.hideModal()},updatePlace(e){if(this.isNew)this.addAttraction(e),this.$refs.infoModal.openModal("\u65B0\u589E\u6210\u529F","\u63D0\u793A",["confirm"]);else{const{id:o}=e;this.editAttraction(o,e),this.$refs.infoModal.openModal("\u7DE8\u8F2F\u6210\u529F","\u63D0\u793A",["confirm"])}}},mounted(){this.getAttractions()}},h=e=>(N("data-v-9641e23f"),e=e(),V(),e),_t=h(()=>t("h2",{class:"text-center"},"\u666F\u9EDE\u7BA1\u7406\u4ECB\u9762",-1)),ft={key:0,class:"table mt-4"},bt=h(()=>t("thead",null,[t("tr",null,[t("th",{width:"70"},"\u7DE8\u865F"),t("th",{width:"120"},"\u5206\u985E"),t("th",null,"\u666F\u9EDE\u540D\u7A31"),t("th",{width:"80"},"\u8A55\u50F9"),t("th",{width:"400"},"\u5730\u5740"),t("th",{width:"120"},"\u555F\u7528"),t("th",{width:"180"},"\u529F\u80FD")])],-1)),gt=h(()=>t("td",null,null,-1)),vt=h(()=>t("td",null,[t("div",{class:"btn-group btn-toggle"},[t("button",{class:"btn btn-sm btn-success active"},"ON"),t("button",{class:"btn btn-sm btn-default"},"OFF")])],-1)),yt={class:"d-flex justify-content-around"},Mt=["onClick"],wt=["onClick"],Pt={key:1,class:"text-center"};function kt(e,o,p,y,s,c){const l=_("LoadingView"),M=_("EditModal"),w=_("informModal");return a(),n(g,null,[f(l,{active:s.loading,backgroundColor:"#000",color:"#fff"},null,8,["active"]),t("div",null,[_t,e.attractions.length?(a(),n("table",ft,[bt,t("tbody",null,[(a(!0),n(g,null,C(e.attractions,d=>(a(),n("tr",{key:d.id},[t("td",null,m(d.id),1),gt,t("td",null,m(d.name),1),t("td",null,m(d.GoogleRate),1),t("td",null,m(d.address),1),vt,t("td",null,[t("div",yt,[t("button",{class:"btn btn-primary btn-sm",type:"button",onClick:o[0]||(o[0]=b=>c.openModal(!0))}," \u65B0\u589E "),t("button",{class:"btn btn-success btn-sm",type:"button",onClick:b=>c.openModal(!1,d)}," \u7DE8\u8F2F ",8,Mt),t("button",{class:"btn btn-danger btn-sm",type:"button",onClick:b=>c.openDelModal(d)}," \u522A\u9664 ",8,wt)])])]))),128))])])):(a(),n("p",Pt," \u76EE\u524D\u5C1A\u7121\u8CC7\u6599 "))]),f(M,{place:s.chosenPlace,isNew:s.isNew,ref:"modal",onUpdatePlace:c.updatePlace},null,8,["place","isNew","onUpdatePlace"]),f(w,{ref:"infoModal",onConfirm:c.confirmAction},null,8,["onConfirm"])],64)}const Ct=v(ut,[["render",kt],["__scopeId","data-v-9641e23f"]]);export{Ct as default};
